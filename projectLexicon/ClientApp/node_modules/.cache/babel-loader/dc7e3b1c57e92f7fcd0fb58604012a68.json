{"ast":null,"code":"var _jsxFileName = \"/Users/bhrozdamsaz/Documents/GitHub/ProjectLexicon/projectLexicon/ClientApp/src/components/ForumCategoryDetail.js\";\n/* eslint-disable react/prop-types */\nimport React, { useState, useEffect } from \"react\";\nimport { Container } from \"reactstrap\";\nimport { Form } from \"reactstrap\";\nimport { InputText } from \"../components/InputText\";\nimport { FormButtons } from \"../components/FormButtons\";\nimport authService from './api-authorization/AuthorizeService';\nimport { apiPost, apiGet } from '../api/api';\nimport \"./root.css\";\nimport { ErrPopup } from './ErrPopup';\nexport function FormCategoryDetail(props) {\n  const {\n    popupId,\n    handleClose\n  } = props;\n  const [orgItem, setOrgItem] = useState({});\n  const [formItem, setFormItem] = useState({});\n  const [errmsg, setErrmsg] = useState(\"\");\n  useEffect(() => {\n    async function fetchData() {\n      let data = await apiGet('forumcategory/Item', {\n        id: popupId\n      });\n      if (data.errText) {\n        return setError(data.errText);\n      }\n      setOrgItem(data.result);\n      setFormItem(data.result);\n    }\n    fetchData();\n  }, []);\n  function setError(errmsg) {\n    setErrmsg(errmsg);\n    return 0;\n  }\n  async function handleSave() {\n    if (popupId === 0) {\n      const newItem = await apiPost('forumcategory/Add', {\n        name: formItem.name\n      });\n      if (newItem.errText) {\n        return setError(newItem.errText);\n      }\n      newItem.result && props.onAdd(newItem.result);\n    } else {\n      await apiPost('forumcategory/Update', {\n        id: popupId,\n        name: formItem.name\n      });\n      const changedItem = await apiPost('forumcategory/Update', {\n        id: popupId,\n        name: formItem.name\n      });\n      if (changedItem.errText) {\n        return setError(changedItem.errText);\n      }\n      changedItem.result && props.onChange(changedItem.result);\n    }\n    handleClose();\n  }\n  async function handleDelete() {\n    const result = await apiPost('forumcategory/Delete', {\n      id: popupId\n    });\n    if (result.errText) return setError(result.errText);\n    props.onDelete(popupId);\n    handleClose();\n  }\n  function handleErrmsgClose() {\n    setErrmsg(\"\");\n  }\n  function handleReset() {\n    setFormItem({\n      ...orgItem\n    });\n  }\n  function formValueChanged(changes) {\n    setFormItem({\n      ...formItem,\n      ...changes\n    });\n  }\n  const nameChanged = name => formValueChanged({\n    name\n  });\n  function isNullOrEmpty(str) {\n    return str === null || str === undefined || str === \"\";\n  }\n  function validateItem(item) {\n    if (!item) return {};\n    let errs = {};\n    if (isNullOrEmpty(item.name)) errs.name = \"Category name can not be empty\";\n    return errs;\n  }\n  const errs = validateItem(formItem);\n  const notValid = errs && Object.values(errs).some(x => x);\n  // const roleCanUpdate = hasRole(appContext.roleId, [\"sysadmin\", \"admin\"]);\n  const roleCanUpdate = true;\n  const deleteVisible = roleCanUpdate && !!orgItem.id;\n  const deleteEnabled = true;\n  const saveVisible = roleCanUpdate;\n  const saveEnabled = !notValid;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, orgItem && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    method: \"post\",\n    id: \"category-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, errmsg && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popupBase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popupForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ErrPopup, {\n    errMsg: errmsg,\n    onClose: handleErrmsgClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"id\",\n    value: orgItem.id || \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputText, {\n    id: \"name\",\n    label: \"Category Name\",\n    err: errs.name,\n    value: formItem.name || \"\",\n    orgValue: orgItem.name || \"\",\n    onChange: nameChanged,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(FormButtons, {\n    deleteVisible: deleteVisible,\n    deleteEnabled: deleteEnabled,\n    saveVisible: saveVisible,\n    saveEnabled: saveEnabled,\n    handleDelete: handleDelete,\n    handleReset: handleReset,\n    handleClose: handleClose,\n    handleSave: handleSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }))));\n}","map":{"version":3,"names":["React","useState","useEffect","Container","Form","InputText","FormButtons","authService","apiPost","apiGet","ErrPopup","FormCategoryDetail","props","popupId","handleClose","orgItem","setOrgItem","formItem","setFormItem","errmsg","setErrmsg","fetchData","data","id","errText","setError","result","handleSave","newItem","name","onAdd","changedItem","onChange","handleDelete","onDelete","handleErrmsgClose","handleReset","formValueChanged","changes","nameChanged","isNullOrEmpty","str","undefined","validateItem","item","errs","notValid","Object","values","some","x","roleCanUpdate","deleteVisible","deleteEnabled","saveVisible","saveEnabled"],"sources":["/Users/bhrozdamsaz/Documents/GitHub/ProjectLexicon/projectLexicon/ClientApp/src/components/ForumCategoryDetail.js"],"sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { useState, useEffect } from \"react\";\n\nimport { Container } from \"reactstrap\";\nimport { Form } from \"reactstrap\";\nimport { InputText } from \"../components/InputText\";\nimport { FormButtons } from \"../components/FormButtons\";\nimport authService from './api-authorization/AuthorizeService'\nimport { apiPost, apiGet } from '../api/api'\nimport \"./root.css\";\nimport { ErrPopup } from './ErrPopup'\n\n\nexport function FormCategoryDetail(props) {\n  const { popupId, handleClose } = props\n  const [orgItem, setOrgItem] = useState({})\n  const [formItem, setFormItem] = useState({});\n  const [errmsg, setErrmsg] = useState(\"\");\n\n\n  useEffect(() => {\n    async function fetchData() {\n      let data = await apiGet('forumcategory/Item', { id: popupId })\n      if (data.errText) {\n        return setError(data.errText)\n      }\n      setOrgItem(data.result);\n      setFormItem(data.result);\n    }\n    fetchData();\n  }, []);\n\n  function setError(errmsg) {\n    setErrmsg(errmsg)\n    return 0;\n  }\n\n  async function handleSave() {\n    if (popupId === 0) {\n      const newItem = await apiPost('forumcategory/Add', { name: formItem.name })\n      if (newItem.errText) {\n        return setError(newItem.errText)\n      }\n      newItem.result && props.onAdd(newItem.result)\n\n    } else {\n      await apiPost('forumcategory/Update', { id: popupId, name: formItem.name })\n      const changedItem = await apiPost('forumcategory/Update', { id: popupId, name: formItem.name })\n      if (changedItem.errText) {\n        return setError(changedItem.errText)\n      }\n      changedItem.result && props.onChange(changedItem.result)\n\n    }\n    handleClose();\n  }\n\n  async function handleDelete() {\n    const result = await apiPost('forumcategory/Delete', { id: popupId })\n    if (result.errText) return setError(result.errText)\n    props.onDelete(popupId);\n    handleClose();\n  }\n\n  function handleErrmsgClose() {\n    setErrmsg(\"\");\n  }\n\n  function handleReset() {\n    setFormItem({ ...orgItem });\n  }\n\n  function formValueChanged(changes) {\n    setFormItem({ ...formItem, ...changes });\n  }\n\n  const nameChanged = (name) => formValueChanged({ name });\n\n  function isNullOrEmpty(str) {\n    return str === null || str === undefined || str === \"\";\n  }\n\n  function validateItem(item) {\n    if (!item) return {}\n    let errs = {}\n    if (isNullOrEmpty(item.name)) errs.name = \"Category name can not be empty\"\n    return errs\n  }\n\n  const errs = validateItem(formItem);\n  const notValid = errs && Object.values(errs).some((x) => x);\n  // const roleCanUpdate = hasRole(appContext.roleId, [\"sysadmin\", \"admin\"]);\n  const roleCanUpdate = true;\n\n  const deleteVisible = roleCanUpdate && !!orgItem.id;\n  const deleteEnabled = true;\n  const saveVisible = roleCanUpdate;\n  const saveEnabled = !notValid;\n\n  return (\n    <div>\n      {orgItem && (\n        <div>\n          <Form method=\"post\" id=\"category-form\">\n            {errmsg &&\n              <div className=\"popupBase\">\n                <div className=\"popupForm\">\n                  <ErrPopup\n                    errMsg={errmsg}\n                    onClose={handleErrmsgClose}\n                  />\n                </div>\n              </div>\n            }\n            <input type=\"hidden\" name=\"id\" value={orgItem.id || \"\"} />\n            <div className=\"inputBox\">\n              <InputText\n                id=\"name\"\n                label=\"Category Name\"\n                err={errs.name}\n                value={formItem.name || \"\"}\n                orgValue={orgItem.name || \"\"}\n                onChange={nameChanged}\n              />\n            </div>\n            <FormButtons\n              deleteVisible={deleteVisible}\n              deleteEnabled={deleteEnabled}\n              saveVisible={saveVisible}\n              saveEnabled={saveEnabled}\n              handleDelete={handleDelete}\n              handleReset={handleReset}\n              handleClose={handleClose}\n              handleSave={handleSave}\n            />\n          </Form>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":";AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAElD,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,IAAI,QAAQ,YAAY;AACjC,SAASC,SAAS,QAAQ,yBAAyB;AACnD,SAASC,WAAW,QAAQ,2BAA2B;AACvD,OAAOC,WAAW,MAAM,sCAAsC;AAC9D,SAASC,OAAO,EAAEC,MAAM,QAAQ,YAAY;AAC5C,OAAO,YAAY;AACnB,SAASC,QAAQ,QAAQ,YAAY;AAGrC,OAAO,SAASC,kBAAkB,CAACC,KAAK,EAAE;EACxC,MAAM;IAAEC,OAAO;IAAEC;EAAY,CAAC,GAAGF,KAAK;EACtC,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1C,MAAM,CAACgB,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC5C,MAAM,CAACkB,MAAM,EAAEC,SAAS,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAGxCC,SAAS,CAAC,MAAM;IACd,eAAemB,SAAS,GAAG;MACzB,IAAIC,IAAI,GAAG,MAAMb,MAAM,CAAC,oBAAoB,EAAE;QAAEc,EAAE,EAAEV;MAAQ,CAAC,CAAC;MAC9D,IAAIS,IAAI,CAACE,OAAO,EAAE;QAChB,OAAOC,QAAQ,CAACH,IAAI,CAACE,OAAO,CAAC;MAC/B;MACAR,UAAU,CAACM,IAAI,CAACI,MAAM,CAAC;MACvBR,WAAW,CAACI,IAAI,CAACI,MAAM,CAAC;IAC1B;IACAL,SAAS,EAAE;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,SAASI,QAAQ,CAACN,MAAM,EAAE;IACxBC,SAAS,CAACD,MAAM,CAAC;IACjB,OAAO,CAAC;EACV;EAEA,eAAeQ,UAAU,GAAG;IAC1B,IAAId,OAAO,KAAK,CAAC,EAAE;MACjB,MAAMe,OAAO,GAAG,MAAMpB,OAAO,CAAC,mBAAmB,EAAE;QAAEqB,IAAI,EAAEZ,QAAQ,CAACY;MAAK,CAAC,CAAC;MAC3E,IAAID,OAAO,CAACJ,OAAO,EAAE;QACnB,OAAOC,QAAQ,CAACG,OAAO,CAACJ,OAAO,CAAC;MAClC;MACAI,OAAO,CAACF,MAAM,IAAId,KAAK,CAACkB,KAAK,CAACF,OAAO,CAACF,MAAM,CAAC;IAE/C,CAAC,MAAM;MACL,MAAMlB,OAAO,CAAC,sBAAsB,EAAE;QAAEe,EAAE,EAAEV,OAAO;QAAEgB,IAAI,EAAEZ,QAAQ,CAACY;MAAK,CAAC,CAAC;MAC3E,MAAME,WAAW,GAAG,MAAMvB,OAAO,CAAC,sBAAsB,EAAE;QAAEe,EAAE,EAAEV,OAAO;QAAEgB,IAAI,EAAEZ,QAAQ,CAACY;MAAK,CAAC,CAAC;MAC/F,IAAIE,WAAW,CAACP,OAAO,EAAE;QACvB,OAAOC,QAAQ,CAACM,WAAW,CAACP,OAAO,CAAC;MACtC;MACAO,WAAW,CAACL,MAAM,IAAId,KAAK,CAACoB,QAAQ,CAACD,WAAW,CAACL,MAAM,CAAC;IAE1D;IACAZ,WAAW,EAAE;EACf;EAEA,eAAemB,YAAY,GAAG;IAC5B,MAAMP,MAAM,GAAG,MAAMlB,OAAO,CAAC,sBAAsB,EAAE;MAAEe,EAAE,EAAEV;IAAQ,CAAC,CAAC;IACrE,IAAIa,MAAM,CAACF,OAAO,EAAE,OAAOC,QAAQ,CAACC,MAAM,CAACF,OAAO,CAAC;IACnDZ,KAAK,CAACsB,QAAQ,CAACrB,OAAO,CAAC;IACvBC,WAAW,EAAE;EACf;EAEA,SAASqB,iBAAiB,GAAG;IAC3Bf,SAAS,CAAC,EAAE,CAAC;EACf;EAEA,SAASgB,WAAW,GAAG;IACrBlB,WAAW,CAAC;MAAE,GAAGH;IAAQ,CAAC,CAAC;EAC7B;EAEA,SAASsB,gBAAgB,CAACC,OAAO,EAAE;IACjCpB,WAAW,CAAC;MAAE,GAAGD,QAAQ;MAAE,GAAGqB;IAAQ,CAAC,CAAC;EAC1C;EAEA,MAAMC,WAAW,GAAIV,IAAI,IAAKQ,gBAAgB,CAAC;IAAER;EAAK,CAAC,CAAC;EAExD,SAASW,aAAa,CAACC,GAAG,EAAE;IAC1B,OAAOA,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKC,SAAS,IAAID,GAAG,KAAK,EAAE;EACxD;EAEA,SAASE,YAAY,CAACC,IAAI,EAAE;IAC1B,IAAI,CAACA,IAAI,EAAE,OAAO,CAAC,CAAC;IACpB,IAAIC,IAAI,GAAG,CAAC,CAAC;IACb,IAAIL,aAAa,CAACI,IAAI,CAACf,IAAI,CAAC,EAAEgB,IAAI,CAAChB,IAAI,GAAG,gCAAgC;IAC1E,OAAOgB,IAAI;EACb;EAEA,MAAMA,IAAI,GAAGF,YAAY,CAAC1B,QAAQ,CAAC;EACnC,MAAM6B,QAAQ,GAAGD,IAAI,IAAIE,MAAM,CAACC,MAAM,CAACH,IAAI,CAAC,CAACI,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAAC;EAC3D;EACA,MAAMC,aAAa,GAAG,IAAI;EAE1B,MAAMC,aAAa,GAAGD,aAAa,IAAI,CAAC,CAACpC,OAAO,CAACQ,EAAE;EACnD,MAAM8B,aAAa,GAAG,IAAI;EAC1B,MAAMC,WAAW,GAAGH,aAAa;EACjC,MAAMI,WAAW,GAAG,CAACT,QAAQ;EAE7B,oBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACG/B,OAAO,iBACN;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,IAAI;IAAC,MAAM,EAAC,MAAM;IAAC,EAAE,EAAC,eAAe;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACnCI,MAAM,iBACL;IAAK,SAAS,EAAC,WAAW;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACxB;IAAK,SAAS,EAAC,WAAW;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACxB,oBAAC,QAAQ;IACP,MAAM,EAAEA,MAAO;IACf,OAAO,EAAEgB,iBAAkB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAC3B,CACE,CACF,eAER;IAAO,IAAI,EAAC,QAAQ;IAAC,IAAI,EAAC,IAAI;IAAC,KAAK,EAAEpB,OAAO,CAACQ,EAAE,IAAI,EAAG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,eAC1D;IAAK,SAAS,EAAC,UAAU;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACvB,oBAAC,SAAS;IACR,EAAE,EAAC,MAAM;IACT,KAAK,EAAC,eAAe;IACrB,GAAG,EAAEsB,IAAI,CAAChB,IAAK;IACf,KAAK,EAAEZ,QAAQ,CAACY,IAAI,IAAI,EAAG;IAC3B,QAAQ,EAAEd,OAAO,CAACc,IAAI,IAAI,EAAG;IAC7B,QAAQ,EAAEU,WAAY;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACtB,CACE,eACN,oBAAC,WAAW;IACV,aAAa,EAAEa,aAAc;IAC7B,aAAa,EAAEC,aAAc;IAC7B,WAAW,EAAEC,WAAY;IACzB,WAAW,EAAEC,WAAY;IACzB,YAAY,EAAEtB,YAAa;IAC3B,WAAW,EAAEG,WAAY;IACzB,WAAW,EAAEtB,WAAY;IACzB,UAAU,EAAEa,UAAW;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACvB,CACG,CAEV,CACG;AAEV"},"metadata":{},"sourceType":"module"}