{"ast":null,"code":"var _jsxFileName = \"/Users/bhrozdamsaz/Documents/GitHub/ProjectLexicon/projectLexicon/ClientApp/src/components/Chat/ConversationList2.js\";\nimport React, { Component, useState, useEffect } from 'react';\nimport ConversationSearch from './ConversationSearch';\nimport ConversationListItem from './ConversationListItem';\nimport Toolbar from './Toolbar';\nimport ToolbarButton from './ToolbarButton';\nimport axios from 'axios';\nimport { apiGet } from './api';\nimport './Style/ConversationList.css';\nimport usersService from '../users/UsersService';\nimport authService from '../api-authorization/AuthorizeService';\nimport Message from './Message';\nimport moment from 'moment';\nimport MessageList from './MessageList';\nconst MY_USER_ID = 'apple';\nexport class ConversationList2 extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      conversations: [],\n      messages: [],\n      userP: \"\",\n      loading: true\n    };\n  }\n  componentDidMount() {\n    this.getConversations();\n  }\n  renderForecastsTable(conversations) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messenger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"conversation-list scrollable sidebar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Toolbar, {\n      title: \"Messenger\",\n      leftItems: [/*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"cog\",\n        icon: \"ion-ios-cog\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 25\n        }\n      })],\n      rightItems: [/*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"add\",\n        icon: \"ion-ios-add-circle-outline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 25\n        }\n      })],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ConversationSearch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }), conversations.map(conversation => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"conversation-list-item\",\n      key: conversation.userid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"conversation-photo\",\n      src: \"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp\",\n      alt: \"conversation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"conversation-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"conversation-title\",\n      id: conversation.userid,\n      onClick: this.getMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 33\n      }\n    }, conversation.userName), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"conversation-snippet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 33\n      }\n    }, \"Offline\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 22\n      }\n    }, /*#__PURE__*/React.createElement(MessageList, {\n      messages2: this.state.messages,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 22\n      }\n    })));\n  }\n  render() {\n    let contents = this.state.loading ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"em\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 18\n      }\n    }, \"Loading...\")) : this.renderForecastsTable(this.state.conversations);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, contents);\n  }\n  async getConversations() {\n    const token = await authService.getAccessToken();\n    const response = await fetch('api/Messages/GetUser', {\n      headers: !token ? {} : {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    this.setState({\n      conversations: data,\n      userP: data[0].userid,\n      loading: false\n    });\n    console.log(this.state.userP);\n  }\n  async getMessage() {\n    var _this$state;\n    let contents = (_this$state = this.state) === null || _this$state === void 0 ? void 0 : _this$state.userP;\n    const token = await authService.getAccessToken();\n    const response = await fetch('api/Messages/' + contents, {\n      headers: !token ? {} : {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    this.setState({\n      messages: data\n    });\n    console.log(this.state.messages);\n  }\n  async handleSubmit(event) {\n    this.getMessage(\"\");\n    // setState({ messages: data});\n\n    // setContactInfo({ FirstName: \"\", SecondName: \"\", Age: \"\", Nationality: \"\", EmailAdress: \"\"}); //reset form values after submit\n  }\n}\nConversationList2.displayName = ConversationList2.name;","map":{"version":3,"names":["React","Component","useState","useEffect","ConversationSearch","ConversationListItem","Toolbar","ToolbarButton","axios","apiGet","usersService","authService","Message","moment","MessageList","MY_USER_ID","ConversationList2","constructor","props","state","conversations","messages","userP","loading","componentDidMount","getConversations","renderForecastsTable","map","conversation","userid","getMessage","userName","render","contents","token","getAccessToken","response","fetch","headers","data","json","setState","console","log","handleSubmit","event","displayName","name"],"sources":["/Users/bhrozdamsaz/Documents/GitHub/ProjectLexicon/projectLexicon/ClientApp/src/components/Chat/ConversationList2.js"],"sourcesContent":["import React, {Component,useState, useEffect} from 'react';\nimport ConversationSearch from './ConversationSearch';\nimport ConversationListItem from './ConversationListItem';\nimport Toolbar from './Toolbar';\nimport ToolbarButton from './ToolbarButton';\nimport axios from 'axios';\nimport { apiGet } from './api';\nimport './Style/ConversationList.css';\nimport usersService from '../users/UsersService';\nimport authService from '../api-authorization/AuthorizeService'\nimport Message from './Message';\nimport moment from 'moment';\nimport MessageList from './MessageList';\nconst MY_USER_ID = 'apple';\nexport class ConversationList2 extends Component {\n    static displayName = ConversationList2.name;\n\n    constructor(props) {\n        super(props);\n        this.state = { conversations: [], messages: [],userP:\"\", loading: true };\n    }\n  \n\n     \n    \n \n    componentDidMount() {\n        this.getConversations();\n\n    }\n\n    renderForecastsTable(conversations) {\n    \n         return (\n             <div className = \"messenger\" >\n            <div className=\"conversation-list scrollable sidebar\">\n            \n                <Toolbar\n                    title=\"Messenger\"\n                    leftItems={[\n                        <ToolbarButton key=\"cog\" icon=\"ion-ios-cog\" />\n                    ]}\n                    rightItems={[\n                        <ToolbarButton key=\"add\" icon=\"ion-ios-add-circle-outline\" />\n                    ]}\n                />\n                <ConversationSearch />\n                {\n                    conversations.map(conversation =>\n\n                        <div className=\"conversation-list-item\" key={conversation.userid}  >\n                            <img className=\"conversation-photo\" src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp\" alt=\"conversation\" />\n                            <div className=\"conversation-info\" >\n                                <h1 className=\"conversation-title\" id={conversation.userid} onClick={this.getMessage}>{conversation.userName}</h1>\n                                <p className=\"conversation-snippet\">Offline</p>\n                            </div>\n                        </div>\n                )\n                }\n\n             </div>\n                     <div className=\" content\">\n                     <MessageList messages2={this.state.messages}/>\n        </div>\n          </div >\n        );\n    }\n    render() {\n        let contents = this.state.loading\n            ? <p><em>Loading...</em></p>\n            : this.renderForecastsTable(this.state.conversations);\n\n        return (\n            <div>\n              \n                {contents}\n\n            </div>\n\n        );\n    }\n\n    async getConversations() {\n        const token = await authService.getAccessToken();\n        const response = await fetch('api/Messages/GetUser', {\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        });\n        const data = await response.json();\n        this.setState({ conversations: data, userP: data[0].userid, loading: false });\n        console.log(this.state.userP);\n        \n    }\n    async getMessage() {\n        let contents = this.state?.userP\n        \n        const token = await authService.getAccessToken();\n        const response = await fetch('api/Messages/' + contents, {\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        });\n        const data = await response.json();\n        this.setState({ messages: data });\n        console.log(this.state.messages);\n        \n    }\n    async handleSubmit(event) {\n\n        this.getMessage(\"\")\n        // setState({ messages: data});\n\n        // setContactInfo({ FirstName: \"\", SecondName: \"\", Age: \"\", Nationality: \"\", EmailAdress: \"\"}); //reset form values after submit\n\n    }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}