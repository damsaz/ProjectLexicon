{"ast":null,"code":"var _jsxFileName = \"/Users/bhrozdamsaz/Documents/GitHub/ProjectLexicon/projectLexicon/ClientApp/src/components/ForumCategoryDetail.js\";\n/* eslint-disable react/prop-types */\nimport React, { useState, useEffect } from \"react\";\nimport { Container } from \"reactstrap\";\nimport { Form } from \"reactstrap\";\nimport { InputText } from \"../components/InputText\";\nimport { FormButtons } from \"../components/FormButtons\";\nimport authService from './api-authorization/AuthorizeService';\nimport { apiPost, apiGet } from '../api/api';\nimport \"./root.css\";\nexport function FormCategoryDetail(props) {\n  const {\n    popupId,\n    handleClose\n  } = props;\n  const [orgItem, setOrgItem] = useState({});\n  const [formItem, setFormItem] = useState({});\n  useEffect(() => {\n    async function fetchData() {\n      let data = await apiGet('forumcategory/Item', {\n        id: popupId\n      });\n      // data = { result: { id: 0, name: \"\" } };\n      setOrgItem(data.result);\n      setFormItem(data.result);\n    }\n    fetchData();\n  }, []);\n  async function handleSave() {\n    if (popupId === 0) {\n      const newItem = await apiPost('forumcategory/Add', {\n        name: formItem.name\n      });\n      newItem.result && props.onAdd(newItem.result);\n    } else {\n      await apiPost('forumcategory/Update', {\n        id: popupId,\n        name: formItem.name\n      });\n      const changedItem = await apiPost('forumcategory/Update', {\n        id: popupId,\n        name: formItem.name\n      });\n      changedItem.result && props.onChange(changedItem.result);\n    }\n    handleClose();\n  }\n  async function handleDelete() {\n    const result = await apiPost('forumcategory/Delete', {\n      id: popupId\n    });\n    result.isSuccess && props.onDelete(popupId);\n    handleClose();\n  }\n  function handleReset() {\n    setFormItem({\n      ...orgItem\n    });\n  }\n  function formValueChanged(changes) {\n    setFormItem({\n      ...formItem,\n      ...changes\n    });\n  }\n  const nameChanged = name => formValueChanged({\n    name\n  });\n  function isNullOrEmpty(str) {\n    return str === null || str === undefined || str === \"\";\n  }\n  function validateItem(item) {\n    if (!item) return {};\n    let errs = {};\n    if (isNullOrEmpty(item.name)) errs.name = \"Category name can not be empty\";\n    return errs;\n  }\n  const errs = validateItem(formItem);\n  const notValid = errs && Object.values(errs).some(x => x);\n  // const roleCanUpdate = hasRole(appContext.roleId, [\"sysadmin\", \"admin\"]);\n  const roleCanUpdate = true;\n  const deleteVisible = roleCanUpdate && !!orgItem.id;\n  const deleteEnabled = true;\n  const saveVisible = roleCanUpdate;\n  const saveEnabled = !notValid;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, orgItem && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    method: \"post\",\n    id: \"category-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"id\",\n    value: orgItem.id || \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputText, {\n    id: \"name\",\n    label: \"Category Name\",\n    err: errs.name,\n    value: formItem.name || \"\",\n    orgValue: orgItem.name || \"\",\n    onChange: nameChanged,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(FormButtons, {\n    deleteVisible: deleteVisible,\n    deleteEnabled: deleteEnabled,\n    saveVisible: saveVisible,\n    saveEnabled: saveEnabled,\n    handleDelete: handleDelete,\n    handleReset: handleReset,\n    handleClose: handleClose,\n    handleSave: handleSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }))));\n}","map":{"version":3,"names":["React","useState","useEffect","Container","Form","InputText","FormButtons","authService","apiPost","apiGet","FormCategoryDetail","props","popupId","handleClose","orgItem","setOrgItem","formItem","setFormItem","fetchData","data","id","result","handleSave","newItem","name","onAdd","changedItem","onChange","handleDelete","isSuccess","onDelete","handleReset","formValueChanged","changes","nameChanged","isNullOrEmpty","str","undefined","validateItem","item","errs","notValid","Object","values","some","x","roleCanUpdate","deleteVisible","deleteEnabled","saveVisible","saveEnabled"],"sources":["/Users/bhrozdamsaz/Documents/GitHub/ProjectLexicon/projectLexicon/ClientApp/src/components/ForumCategoryDetail.js"],"sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { useState, useEffect } from \"react\";\n\nimport { Container } from \"reactstrap\";\nimport { Form } from \"reactstrap\";\nimport { InputText } from \"../components/InputText\";\nimport { FormButtons } from \"../components/FormButtons\";\nimport authService from './api-authorization/AuthorizeService'\nimport { apiPost, apiGet } from '../api/api'\nimport \"./root.css\";\n\n\nexport function FormCategoryDetail(props) {\n  const { popupId, handleClose } = props\n  const [orgItem, setOrgItem] = useState({})\n  const [formItem, setFormItem] = useState({});\n\n  useEffect(() => {\n    async function fetchData() {\n      let data = await apiGet('forumcategory/Item', { id: popupId })\n      // data = { result: { id: 0, name: \"\" } };\n      setOrgItem(data.result);\n      setFormItem(data.result);\n    }\n    fetchData();\n  }, []);\n\n  async function handleSave() {\n    if (popupId === 0) {\n      const newItem = await apiPost('forumcategory/Add', { name: formItem.name })\n      newItem.result && props.onAdd(newItem.result)\n\n    } else {\n      await apiPost('forumcategory/Update', { id: popupId, name: formItem.name })\n      const changedItem = await apiPost('forumcategory/Update', { id: popupId, name: formItem.name })\n      changedItem.result && props.onChange(changedItem.result)\n\n    }\n    handleClose();\n  }\n\n  async function handleDelete() {\n    const result = await apiPost('forumcategory/Delete', { id: popupId })\n    result.isSuccess && props.onDelete(popupId);\n    handleClose();\n  }\n\n  function handleReset() {\n    setFormItem({ ...orgItem });\n  }\n\n  function formValueChanged(changes) {\n    setFormItem({ ...formItem, ...changes });\n  }\n\n  const nameChanged = (name) => formValueChanged({ name });\n\n  function isNullOrEmpty(str) {\n    return str === null || str === undefined || str === \"\";\n  }\n\n  function validateItem(item) {\n    if (!item) return {}\n    let errs = {}\n    if (isNullOrEmpty(item.name)) errs.name = \"Category name can not be empty\"\n    return errs\n  }\n\n  const errs = validateItem(formItem);\n  const notValid = errs && Object.values(errs).some((x) => x);\n  // const roleCanUpdate = hasRole(appContext.roleId, [\"sysadmin\", \"admin\"]);\n  const roleCanUpdate = true;\n\n  const deleteVisible = roleCanUpdate && !!orgItem.id;\n  const deleteEnabled = true;\n  const saveVisible = roleCanUpdate;\n  const saveEnabled = !notValid;\n\n  return (\n    <div>\n      {orgItem && (\n        <div>\n          <Form method=\"post\" id=\"category-form\">\n            <input type=\"hidden\" name=\"id\" value={orgItem.id || \"\"} />\n            <div className=\"inputBox\">\n              <InputText\n                id=\"name\"\n                label=\"Category Name\"\n                err={errs.name}\n                value={formItem.name || \"\"}\n                orgValue={orgItem.name || \"\"}\n                onChange={nameChanged}\n              />\n            </div>\n            <FormButtons\n              deleteVisible={deleteVisible}\n              deleteEnabled={deleteEnabled}\n              saveVisible={saveVisible}\n              saveEnabled={saveEnabled}\n              handleDelete={handleDelete}\n              handleReset={handleReset}\n              handleClose={handleClose}\n              handleSave={handleSave}\n            />\n          </Form>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}