{"ast":null,"code":"var _jsxFileName = \"/Users/bhrozdamsaz/Documents/GitHub/ProjectLexicon/projectLexicon/ClientApp/src/components/ForumThreadDetail.js\";\n/* eslint-disable react/prop-types */\nimport React, { useState, useEffect } from \"react\";\nimport { Container } from \"reactstrap\";\nimport { Form } from \"reactstrap\";\nimport { InputText } from \"../components/InputText\";\nimport { FormButtons } from \"../components/FormButtons\";\nimport authService from './api-authorization/AuthorizeService';\nimport { apiPost, apiGet } from '../api/api';\nimport \"./root.css\";\nimport { ErrBase } from './ErrBase';\nexport function FormThreadDetail(props) {\n  const {\n    popupId,\n    handleClose,\n    forumCategoryId\n  } = props;\n  const [orgItem, setOrgItem] = useState({\n    forumCategoryId: forumCategoryId\n  });\n  const [formItem, setFormItem] = useState({});\n  const [errmsg, setErrmsg] = useState(\"\");\n  useEffect(() => {\n    async function fetchData() {\n      let data = await apiGet('forumthread/Item', {\n        id: popupId\n      });\n      if (data.errText) {\n        return setErrmsg(data.errText);\n      }\n\n      // data = { result: { id: 0, name: \"\" } };\n      if (data.result.forumCategoryId === 0) data.result.forumCategoryId = forumCategoryId;\n      setOrgItem({\n        ...data.result\n      });\n      setFormItem({\n        ...data.result\n      });\n    }\n    fetchData();\n  }, []);\n  async function handleSave() {\n    if (popupId === 0) {\n      const data = await apiPost('forumthread/Add', {\n        name: formItem.name,\n        forumCategoryId: orgItem.forumCategoryId\n      });\n      if (data.errText) {\n        return setErrmsg(data.errText);\n      }\n      data.result && props.onAdd(data.result);\n    } else {\n      const data = await apiPost('forumthread/Update', {\n        id: popupId,\n        name: formItem.name,\n        forumCategoryId: orgItem.forumCategoryId\n      });\n      if (data.errText) {\n        return setErrmsg(data.errText);\n      }\n      data.result && props.onChange(data.result);\n    }\n    handleClose();\n  }\n  async function handleDelete() {\n    // await deleteItem(orgItem.id);\n    const result = await apiPost('forumthread/Delete', {\n      id: popupId\n    });\n    result.isSuccess && props.onDelete(popupId);\n    handleClose();\n  }\n  function handleReset() {\n    setFormItem({\n      ...orgItem\n    });\n  }\n  function formValueChanged(changes) {\n    setFormItem({\n      ...formItem,\n      ...changes\n    });\n  }\n  const nameChanged = name => formValueChanged({\n    name\n  });\n  function isNullOrEmpty(str) {\n    return str === null || str === undefined || str === \"\";\n  }\n  function validateItem(item) {\n    if (!item) return {};\n    let errs = {};\n    if (isNullOrEmpty(item.name)) errs.name = \"Thread name can not be empty\";\n    return errs;\n  }\n  const errs = validateItem(formItem);\n  const notValid = errs && Object.values(errs).some(x => x);\n  // const roleCanUpdate = hasRole(appContext.roleId, [\"sysadmin\", \"admin\"]);\n  const roleCanUpdate = true;\n  const deleteVisible = roleCanUpdate && !!orgItem.id;\n  const deleteEnabled = true;\n  const saveVisible = roleCanUpdate;\n  const saveEnabled = !notValid;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ErrBase, {\n    errmsg: errmsg,\n    onClose: () => setErrmsg(\"\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }), orgItem && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    method: \"post\",\n    id: \"thread-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, orgItem.id || \"\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"id\",\n    value: orgItem.id || \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputText, {\n    id: \"name\",\n    label: \"Thread Name\",\n    err: errs.name,\n    value: formItem.name || \"\",\n    orgValue: orgItem.name || \"\",\n    onChange: nameChanged,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(FormButtons, {\n    deleteVisible: deleteVisible,\n    deleteEnabled: deleteEnabled,\n    saveVisible: saveVisible,\n    saveEnabled: saveEnabled,\n    handleDelete: handleDelete,\n    handleReset: handleReset,\n    handleClose: handleClose,\n    handleSave: handleSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }))));\n}","map":{"version":3,"names":["React","useState","useEffect","Container","Form","InputText","FormButtons","authService","apiPost","apiGet","ErrBase","FormThreadDetail","props","popupId","handleClose","forumCategoryId","orgItem","setOrgItem","formItem","setFormItem","errmsg","setErrmsg","fetchData","data","id","errText","result","handleSave","name","onAdd","onChange","handleDelete","isSuccess","onDelete","handleReset","formValueChanged","changes","nameChanged","isNullOrEmpty","str","undefined","validateItem","item","errs","notValid","Object","values","some","x","roleCanUpdate","deleteVisible","deleteEnabled","saveVisible","saveEnabled"],"sources":["/Users/bhrozdamsaz/Documents/GitHub/ProjectLexicon/projectLexicon/ClientApp/src/components/ForumThreadDetail.js"],"sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { useState, useEffect } from \"react\";\n\nimport { Container } from \"reactstrap\";\nimport { Form } from \"reactstrap\";\nimport { InputText } from \"../components/InputText\";\nimport { FormButtons } from \"../components/FormButtons\";\nimport authService from './api-authorization/AuthorizeService'\nimport { apiPost, apiGet } from '../api/api'\nimport \"./root.css\";\nimport { ErrBase } from './ErrBase'\n\n\nexport function FormThreadDetail(props) {\n  const { popupId, handleClose, forumCategoryId } = props\n  const [orgItem, setOrgItem] = useState({ forumCategoryId: forumCategoryId })\n  const [formItem, setFormItem] = useState({});\n  const [errmsg, setErrmsg] = useState(\"\");\n\n  useEffect(() => {\n    async function fetchData() {\n      let data = await apiGet('forumthread/Item', { id: popupId })\n      if (data.errText) {\n        return setErrmsg(data.errText);\n      }\n\n      // data = { result: { id: 0, name: \"\" } };\n      if (data.result.forumCategoryId === 0) data.result.forumCategoryId = forumCategoryId;\n      setOrgItem({ ...data.result });\n      setFormItem({ ...data.result });\n    }\n    fetchData();\n  }, []);\n\n  async function handleSave() {\n    if (popupId === 0) {\n      const data = await apiPost('forumthread/Add', { name: formItem.name, forumCategoryId: orgItem.forumCategoryId })\n      if (data.errText) {\n        return setErrmsg(data.errText);\n      }\n      data.result && props.onAdd(data.result)\n    } else {\n      const data = await apiPost('forumthread/Update', { id: popupId, name: formItem.name, forumCategoryId: orgItem.forumCategoryId })\n      if (data.errText) {\n        return setErrmsg(data.errText);\n      }\n      data.result && props.onChange(data.result)\n    }\n    handleClose();\n  }\n\n  async function handleDelete() {\n    // await deleteItem(orgItem.id);\n    const result = await apiPost('forumthread/Delete', { id: popupId })\n    result.isSuccess && props.onDelete(popupId);\n    handleClose();\n  }\n\n  function handleReset() {\n    setFormItem({ ...orgItem });\n  }\n\n  function formValueChanged(changes) {\n    setFormItem({ ...formItem, ...changes });\n  }\n\n  const nameChanged = (name) => formValueChanged({ name });\n\n  function isNullOrEmpty(str) {\n    return str === null || str === undefined || str === \"\";\n  }\n\n  function validateItem(item) {\n    if (!item) return {}\n    let errs = {}\n    if (isNullOrEmpty(item.name)) errs.name = \"Thread name can not be empty\"\n    return errs\n  }\n\n  const errs = validateItem(formItem);\n  const notValid = errs && Object.values(errs).some((x) => x);\n  // const roleCanUpdate = hasRole(appContext.roleId, [\"sysadmin\", \"admin\"]);\n  const roleCanUpdate = true;\n\n  const deleteVisible = roleCanUpdate && !!orgItem.id;\n  const deleteEnabled = true;\n  const saveVisible = roleCanUpdate;\n  const saveEnabled = !notValid;\n\n  return (\n    <div>\n      <ErrBase errmsg={errmsg} onClose={() => setErrmsg(\"\")} />\n      {orgItem && (\n        <div>\n          <Form method=\"post\" id=\"thread-form\">\n            <label>{orgItem.id || \"\"}</label>\n            <input type=\"hidden\" name=\"id\" value={orgItem.id || \"\"} />\n            <div className=\"inputBox\">\n              <InputText\n                id=\"name\"\n                label=\"Thread Name\"\n                err={errs.name}\n                value={formItem.name || \"\"}\n                orgValue={orgItem.name || \"\"}\n                onChange={nameChanged}\n              />\n            </div>\n            <FormButtons\n              deleteVisible={deleteVisible}\n              deleteEnabled={deleteEnabled}\n              saveVisible={saveVisible}\n              saveEnabled={saveEnabled}\n              handleDelete={handleDelete}\n              handleReset={handleReset}\n              handleClose={handleClose}\n              handleSave={handleSave}\n            />\n          </Form>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}